name: lab3
topology:
  nodes:
    router1:
      kind: linux
      image: frrouting/frr-debian
      binds:
#        - frr/daemons:/etc/frr/daemons
        - frr/frr.conf:/etc/snmp/frr.conf
        - frr/zebra.conf:/etc/snmp/zebra.conf
        - frr/snmpd.conf:/etc/snmp/snmpd.conf
        - router1.conf:/etc/frr/frr.conf
        - router.sh:/router.sh
      exec:
        - /bin/bash /router.sh

    router2:
      kind: linux
      image: frrouting/frr-debian
      binds:
#        - frr/daemons:/etc/frr/daemons
        - frr/frr.conf:/etc/snmp/frr.conf
        - frr/zebra.conf:/etc/snmp/zebra.conf
        - frr/snmpd.conf:/etc/snmp/snmpd.conf
        - router2.conf:/etc/frr/frr.conf
        - router.sh:/router.sh
      exec:
        - /bin/bash /router.sh

    router3:
      kind: linux
      image: frrouting/frr-debian
      binds:
#        - frr/daemons:/etc/frr/daemons
        - frr/frr.conf:/etc/snmp/frr.conf
        - frr/zebra.conf:/etc/snmp/zebra.conf
        - frr/snmpd.conf:/etc/snmp/snmpd.conf
        - router3.conf:/etc/frr/frr.conf
        - router.sh:/router.sh
      exec:
        - /bin/bash /router.sh
    
    observium:
      kind: linux
      image: uberchuckie/observium
      ports:
      - 8103:8668
      binds:
      - observium.sh:/observium.sh
      exec:
      - /bin/bash /observium.sh
  
  links:
    - endpoints: ["router1:eth1", "router2:eth2"]
    - endpoints: ["router2:eth1", "router3:eth2"]
    - endpoints: ["router3:eth1", "router1:eth2"]
    - endpoints: ["observium:eth1", "router1:eth3"]